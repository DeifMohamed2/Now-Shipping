<%- contentFor('HeaderCss') %>
<link href="/assets/libs/sweetalert2/sweetalert2.min.css" rel="stylesheet" type="text/css" />
<%- contentFor('body') %>
<div class="row">
  <div class="col-xxl-3 col-sm-6">
    <div class="card card-animate">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <p class="fw-medium text-muted mb-0">Total Pickups</p>
            <h2 class="mt-4 ff-secondary fw-semibold"><span class="counter-value" data-target="234">0</span>k</h2>
            <p class="mb-0 text-muted"><span class="badge bg-light text-success mb-0"> <i class="ri-arrow-up-line align-middle"></i> 17.32 %</span> vs. previous month</p>
          </div>
          <div>
            <div class="avatar-sm flex-shrink-0">
              <span class="avatar-title bg-info-subtle text-info rounded-circle fs-4">
                <i class="ri-truck-line"></i>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xxl-3 col-sm-6">
    <div class="card card-animate">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <p class="fw-medium text-muted mb-0">Pending Pickups</p>
            <h2 class="mt-4 ff-secondary fw-semibold"><span class="counter-value" data-target="64.5">0</span>k</h2>
            <p class="mb-0 text-muted"><span class="badge bg-light text-danger mb-0"> <i class="ri-arrow-down-line align-middle"></i> 0.87 %</span> vs. previous month</p>
          </div>
          <div>
            <div class="avatar-sm flex-shrink-0">
              <span class="avatar-title bg-warning-subtle text-warning rounded-circle fs-4">
                <i class="mdi mdi-clock-outline"></i>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xxl-3 col-sm-6">
    <div class="card card-animate">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <p class="fw-medium text-muted mb-0">Completed Pickups</p>
            <h2 class="mt-4 ff-secondary fw-semibold"><span class="counter-value" data-target="116.21">0</span>K</h2>
            <p class="mb-0 text-muted"><span class="badge bg-light text-danger mb-0"> <i class="ri-arrow-down-line align-middle"></i> 2.52 % </span> vs. previous month</p>
          </div>
          <div>
            <div class="avatar-sm flex-shrink-0">
              <span class="avatar-title bg-success-subtle text-success rounded-circle fs-4">
                <i class="ri-checkbox-circle-line"></i>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xxl-3 col-sm-6">
    <div class="card card-animate">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <div>
            <p class="fw-medium text-muted mb-0">Canceled Pickups</p>
            <h2 class="mt-4 ff-secondary fw-semibold"><span class="counter-value" data-target="14.84">0</span>%</h2>
            <p class="mb-0 text-muted"><span class="badge bg-light text-success mb-0"> <i class="ri-arrow-up-line align-middle"></i> 0.63 % </span> vs. previous month</p>
          </div>
          <div>
            <div class="avatar-sm flex-shrink-0">
              <span class="avatar-title bg-danger-subtle text-danger rounded-circle fs-4">
                <i class="ri-close-circle-line"></i>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <div class="card" id="pickupsList">
      <div class="card-header border-0">
        <div class="d-flex align-items-center">
          <h5 class="card-title mb-0 flex-grow-1">All Pickup Orders</h5>
          <div class="flex-shrink-0">
            <div class="d-flex flex-wrap gap-2">
              <button class="btn btn-danger add-btn" data-bs-toggle="modal" data-bs-target="#showModal"><i class="ri-add-line align-bottom me-1"></i> Create Order</button>
              <button class="btn btn-soft-danger" id="remove-actions" onClick="deleteMultiple()"><i class="ri-delete-bin-2-line"></i></button>
            </div>
          </div>
        </div>
      </div>
      <div class="card-body border border-dashed border-end-0 border-start-0">
        <form>
          <div class="row g-3">
            <div class="col-xxl-5 col-sm-12">
              <div class="search-box">
                <input type="text" class="form-control search bg-light border-light" placeholder="Search orders by client or location...">
                <i class="ri-search-line search-icon"></i>
              </div>
            </div>
            <div class="col-xxl-3 col-sm-4">
              <input type="text" class="form-control bg-light border-light" id="demo-datepicker" data-provider="flatpickr" data-date-format="d M, Y" data-range-date="true" placeholder="Select date range">
            </div>
            <div class="col-xxl-3 col-sm-4">
              <div class="input-light">
                <select class="form-control" data-choices data-choices-search-false name="choices-single-default" id="idStatus">
                  <option value="">Status</option>
                  <option value="all" selected>All</option>
                  <option value="Pending">Pending</option>
                  <option value="In Transit">In Transit</option>
                  <option value="Completed">Completed</option>
                  <option value="Canceled">Canceled</option>
                </select>
              </div>
            </div>
            <div class="col-xxl-1 col-sm-4">
              <button type="button" class="btn btn-primary w-100" onclick="SearchData();"> <i class="ri-equalizer-fill me-1 align-bottom"></i>
                Filters
              </button>
            </div>
          </div>
        </form>
      </div>
      <div class="card-body">
        <div class="table-responsive table-card mb-4">
          <table class="table align-middle table-nowrap mb-0" id="pickupsTable">
            <thead class="table-light text-muted">
              <tr>
                <th scope="col" style="width: 40px;">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="checkAll" value="option">
                  </div>
                </th>
                <th class="sort" data-sort="id">Order ID</th>
                <th class="sort" data-sort="client_name">Client</th>
                <th class="sort" data-sort="pickup_location">Pickup Location</th>
                <th class="sort" data-sort="assigned_driver">Driver</th>
                <th class="sort" data-sort="pickup_date">Pickup Date</th>
                <th class="sort" data-sort="status">Status</th>
                <th class="sort" data-sort="priority">Priority</th>
              </tr>
            </thead>
            <tbody class="list form-check-all">
              <tr>
                <th scope="row">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="chk_child" value="option1">
                  </div>
                </th>
                <td class="id"><a href="#" class="fw-medium link-primary">#PICK-215</a></td>
                <td class="client_name">Acme Corp</td>
                <td>
                  <div class="d-flex">
                    <div class="flex-grow-1 pickup_location">123 Main St, Warehouse 4</div>
                    <div class="flex-shrink-0 ms-4">
                      <ul class="list-inline tasks-list-menu mb-0">
                        <li class="list-inline-item"><a href="#"><i class="ri-eye-fill align-bottom me-2 text-muted"></i></a></li>
                        <li class="list-inline-item"><a class="edit-item-btn" href="#showModal" data-bs-toggle="modal"><i class="ri-pencil-fill align-bottom me-2 text-muted"></i></a></li>
                        <li class="list-inline-item">
                          <a class="remove-item-btn" data-bs-toggle="modal" href="#deleteOrder">
                            <i class="ri-delete-bin-fill align-bottom me-2 text-muted"></i>
                          </a>
                        </li>
                      </ul>
                    </div>
                  </div>
                </td>
                <td class="assigned_driver">
                  <div class="avatar-group">
                    <a href="javascript: void(0);" class="avatar-group-item" data-bs-toggle="tooltip" data-bs-placement="top" title="John Driver">
                      <img src="assets/images/users/avatar-3.jpg" alt="" class="rounded-circle avatar-xxs" loading="lazy" />
                    </a>
                  </div>
                </td>
                <td class="pickup_date">25 Jan, 2024</td>
                <td class="status"><span class="badge bg-warning-subtle text-warning text-uppercase">In Transit</span></td>
                <td class="priority"><span class="badge bg-danger text-uppercase">High</span></td>
              </tr>
            </tbody>
          </table>
          <div class="noresult" style="display: none">
            <div class="text-center">
              <lord-icon src="https://cdn.lordicon.com/msoeawqm.json" trigger="loop" colors="primary:#121331,secondary:#08a88a" style="width:75px;height:75px"></lord-icon>
              <h5 class="mt-2">No Pickup Orders Found</h5>
              <p class="text-muted mb-0">We couldn't find any pickup orders matching your criteria.</p>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-end mt-2">
          <div class="pagination-wrap hstack gap-2">
            <a class="page-item pagination-prev disabled" href="#">
              Previous
            </a>
            <ul class="pagination listjs-pagination mb-0"></ul>
            <a class="page-item pagination-next" href="#">
              Next
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade flip" id="deleteOrder" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body p-5 text-center">
        <lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop" colors="primary:#405189,secondary:#f06548" style="width:90px;height:90px"></lord-icon>
        <div class="mt-4 text-center">
          <h4>Delete Pickup Order?</h4>
          <p class="text-muted fs-14 mb-4">This will permanently remove the order from the system.</p>
          <div class="hstack gap-2 justify-content-center remove">
            <button class="btn btn-link btn-ghost-success fw-medium text-decoration-none" data-bs-dismiss="modal"><i class="ri-close-line me-1 align-middle"></i> Cancel</button>
            <button class="btn btn-danger" id="delete-record">Delete Order</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade zoomIn" id="showModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content border-0">
      <div class="modal-header p-3 bg-info-subtle">
        <h5 class="modal-title">Create Pickup Order</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form class="tablelist-form" autocomplete="off">
        <div class="modal-body">
          <div class="row g-3">
            <div class="col-lg-6">
              <label for="clientName-field" class="form-label">Client Name</label>
              <input type="text" id="clientName-field" class="form-control" placeholder="Client name" required />
            </div>
            <div class="col-lg-6">
              <label for="contactNumber-field" class="form-label">Contact Number</label>
              <input type="tel" id="contactNumber-field" class="form-control" placeholder="Contact number" required />
            </div>
            <div class="col-lg-12">
              <label for="pickupLocation-field" class="form-label">Pickup Location</label>
              <input type="text" id="pickupLocation-field" class="form-control" placeholder="Full address" required />
            </div>
            <div class="col-lg-12">
              <label class="form-label">Assign Driver</label>
              <div data-simplebar style="height: 95px;">
                <ul class="list-unstyled vstack gap-2 mb-0">
                  <li>
                    <div class="form-check d-flex align-items-center">
                      <input class="form-check-input me-3" type="radio" name="assignedDriver" value="driver1" id="driver1">
                      <label class="form-check-label d-flex align-items-center" for="driver1">
                        <span class="flex-shrink-0">
                          <img src="assets/images/users/avatar-2.jpg" alt="" class="avatar-xxs rounded-circle">
                        </span>
                        <span class="flex-grow-1 ms-2">John Driver</span>
                      </label>
                    </div>
                  </li>
                  <!-- Add more driver options as needed -->
                </ul>
              </div>
            </div>
            <div class="col-lg-6">
              <label for="pickup-date" class="form-label">Pickup Date</label>
              <input type="text" id="pickup-date" class="form-control" data-provider="flatpickr" placeholder="Select date" required />
            </div>
            <div class="col-lg-6">
              <label for="order-status" class="form-label">Status</label>
              <select class="form-control" id="order-status">
                <option value="Pending">Pending</option>
                <option value="In Transit">In Transit</option>
                <option value="Completed">Completed</option>
                <option value="Canceled">Canceled</option>
              </select>
            </div>
            <div class="col-lg-12">
              <label for="special-instructions" class="form-label">Special Instructions</label>
              <textarea class="form-control" id="special-instructions" rows="3" placeholder="Any special requirements"></textarea>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <div class="hstack gap-2 justify-content-end">
            <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-success">Create Order</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<%- contentFor('FooterJs') %>
<script src="assets/libs/list.js/list.min.js"></script>
<script src="assets/libs/list.pagination.js/list.pagination.min.js"></script>
<script src="assets/js/pages/pickups-list.init.js"></script>
<script src="assets/libs/sweetalert2/sweetalert2.min.js"></script>
